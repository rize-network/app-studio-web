# KanbanBoard

A flexible Kanban board component for managing tasks and workflows. Features drag-and-drop functionality for cards between columns, customizable card and column rendering, and comprehensive styling options.

## When to use
Use the Kanban Board component to:
- Visualize a workflow or process.
- Manage tasks or items as they move through different stages.
- Allow users to reorder and re-categorize items using drag-and-drop.
- Build project management tools, task trackers, or any workflow-based UI.

### **Import**
  ```tsx
  import { KanbanBoard } from '@app-studio/web';
  ```

### **Default**
A basic Kanban board with three columns and some cards.

![Default Kanban Board](https://placehold.co/800x450)

```tsx
import React, { useState } from 'react';
import { KanbanBoard } from '../KanbanBoard';
import { KanbanBoardColumn } from '../KanbanBoard/KanbanBoard.props';

export const DefaultKanbanBoard = () => {
  const [columns, setColumns] = useState<KanbanBoardColumn[]>([
    {
      id: 'todo',
      title: 'To Do',
      cards: [
        { id: '1', title: 'Design System', description: 'Create a new design system.' },
        { id: '2', title: 'API Integration', description: 'Integrate with the new API.' },
      ],
    },
    {
      id: 'inprogress',
      title: 'In Progress',
      cards: [
        { id: '3', title: 'User Dashboard', description: 'Develop the main user dashboard.' },
      ],
    },
    {
      id: 'done',
      title: 'Done',
      cards: [
        { id: '4', title: 'Project Setup', description: 'Initial project setup and configuration.' },
      ],
    },
  ]);

  return <KanbanBoard columns={columns} onChange={setColumns} />;
};
```

### **Custom Card Rendering**
Customize how cards are displayed using the `renderCard` prop. This is useful for adding priority indicators, avatars, or other custom elements to your cards.

![Kanban Board with custom cards](https://placehold.co/800x500)

```tsx
import React, { useState } from 'react';
import { KanbanBoard } from '../KanbanBoard';
import { KanbanBoardColumn, KanbanBoardCard } from '../KanbanBoard/KanbanBoard.props';
import { View, Text, Horizontal } from 'app-studio';

export const CustomRenderKanbanBoard = () => {
  const [columns, setColumns] = useState<KanbanBoardColumn[]>([
        {
      id: 'todo',
      title: 'To Do',
      cards: [
        { id: '1', title: 'Design System', description: 'Create a new design system.', metadata: { priority: 'high' } },
        { id: '2', title: 'API Integration', description: 'Integrate with the new API.', metadata: { priority: 'low' } },
      ],
    },
    {
      id: 'inprogress',
      title: 'In Progress',
      cards: [
        { id: '3', title: 'User Dashboard', description: 'Develop the main user dashboard.', metadata: { priority: 'medium' } },
      ],
    },
    {
      id: 'done',
      title: 'Done',
      cards: [
        { id: '4', title: 'Project Setup', description: 'Initial project setup and configuration.', metadata: { priority: 'low' } },
      ],
    },
  ]);

  const renderCard = (card: KanbanBoardCard, column: KanbanBoardColumn) => {
    const priority = card.metadata?.priority as string;
    const priorityColors = {
      low: 'color.green.500',
      medium: 'color.yellow.500',
      high: 'color.red.500',
    };

    return (
      <View>
        <Horizontal alignItems="center" marginBottom={8}>
          <View
            width={8}
            height={8}
            borderRadius="50%"
            backgroundColor={priorityColors[priority]}
            marginRight={8}
          />
          <Text fontWeight="semibold">{card.title}</Text>
        </Horizontal>
        <Text fontSize={14} color="color.gray.600">
          {card.description}
        </Text>
      </View>
    );
  };

  return <KanbanBoard columns={columns} onChange={setColumns} renderCard={renderCard} />;
};
```

### **Custom Column Header and Adding Cards**
Use `renderColumnHeader` to create a custom header, for example to add an "Add Card" button. The `onCardCreate` prop can then be used to handle the creation of new cards.

![Kanban Board with custom column header](https://placehold.co/800x450)

```tsx
import React, { useState } from 'react';
import { KanbanBoard } from '../KanbanBoard';
import { Button } from '../Button';
import { KanbanBoardColumn, KanbanBoardCard } from '../KanbanBoard/KanbanBoard.props';
import { View, Text, Horizontal } from 'app-studio';

export const CustomHeaderKanbanBoard = () => {
  const [columns, setColumns] = useState<KanbanBoardColumn[]>([
    { id: 'todo', title: 'To Do', cards: [] },
  ]);

  const handleCardCreate = (card, column) => {
    const newCard = {
      id: `${Date.now()}`,
      title: 'New Card',
      description: 'A new card was added.',
    };
    const newColumns = columns.map(col => {
      if (col.id === column.id) {
        return { ...col, cards: [...col.cards, newCard] };
      }
      return col;
    });
    setColumns(newColumns);
  };

  const renderColumnHeader = (column: KanbanBoardColumn) => {
    return (
      <Horizontal justifyContent="space-between" alignItems="center">
        <Text fontWeight="bold">{column.title}</Text>
        <Button size="sm" onClick={() => handleCardCreate(null, column)}>+ Add</Button>
      </Horizontal>
    );
  };

  return <KanbanBoard columns={columns} onChange={setColumns} onCardCreate={handleCardCreate} renderColumnHeader={renderColumnHeader} />;
};
```

### **Inline Editing**
You can implement inline editing of card titles by using the `onCardTitleChange` prop and a custom `renderCard` function that displays an input field on double click.

![Kanban Board with inline editing](https://placehold.co/800x450)

```tsx
import React, { useState } from 'react';
import { KanbanBoard } from '../KanbanBoard';
import { KanbanBoardColumn, KanbanBoardCard } from '../KanbanBoard/KanbanBoard.props';
import { Input, Text } from 'app-studio';

export const EditableKanbanBoard = () => {
  const [columns, setColumns] = useState<KanbanBoardColumn[]>([
    {
      id: 'todo',
      title: 'To Do',
      cards: [{ id: '1', title: 'Editable Card' }],
    },
  ]);
  const [editingCardId, setEditingCardId] = useState<string | null>(null);

  const handleTitleChange = (card, column, newTitle) => {
    const newColumns = columns.map(col => {
      if (col.id === column.id) {
        const newCards = col.cards.map(c => c.id === card.id ? { ...c, title: newTitle } : c);
        return { ...col, cards: newCards };
      }
      return col;
    });
    setColumns(newColumns);
    setEditingCardId(null);
  };

  const renderCard = (card, column) => {
    if (editingCardId === card.id) {
      return (
        <Input
          autoFocus
          defaultValue={card.title}
          onBlur={(e) => handleTitleChange(card, column, e.target.value)}
          onKeyDown={(e) => {
            if (e.key === 'Enter') {
              handleTitleChange(card, column, e.currentTarget.value);
            }
          }}
        />
      );
    }
    return <Text onDoubleClick={() => setEditingCardId(card.id)}>{card.title}</Text>;
  };

  return (
    <KanbanBoard
      columns={columns}
      onChange={setColumns}
      onCardTitleChange={handleTitleChange}
      renderCard={renderCard}
    />
  );
};
```

## Live Demo
A live demo of the Kanban Board component with all its features is available [here](https://app-studio-web.vercel.app/components/kanban-board).

## Props

| Prop | Type | Description | Default |
| --- | --- | --- | --- |
| `columns` | `KanbanBoardColumn[]` | Array of columns to display. | `[]` |
| `onChange` | `(columns: KanbanBoardColumn[]) => void` | Callback when columns or cards are changed (e.g., after drag-and-drop). | - |
| `onCardMove` | `(card: KanbanBoardCard, fromColumn: KanbanBoardColumn, toColumn: KanbanBoardColumn) => void` | Callback when a card is moved to a different column. | - |
| `onCardCreate` | `(card: KanbanBoardCard, column: KanbanBoardColumn) => void` | Callback when a card is created. | - |
| `onCardDelete` | `(card: KanbanBoardCard, column: KanbanBoardColumn) => void` | Callback when a card is deleted. | - |
| `onCardClick` | `(card: KanbanBoardCard, column: KanbanBoardColumn) => void` | Callback when a card is clicked. | - |
| `onCardDoubleClick` | `(card: KanbanBoardCard, column: KanbanBoardColumn) => void` | Callback when a card is double-clicked. | - |
| `onCardTitleChange` | `(card: KanbanBoardCard, column: KanbanBoardColumn, newTitle: string) => void` | Callback when a card's title is changed. | - |
| `onCardDescriptionChange` | `(card: KanbanBoardCard, column: KanbanBoardColumn, newDescription: string) => void` | Callback when a card's description is changed. | - |
| `renderCard` | `(card: KanbanBoardCard, column: KanbanBoardColumn) => React.ReactNode` | Custom render method for cards. | - |
| `renderColumnHeader` | `(column: KanbanBoardColumn) => React.ReactNode` | Custom render method for column headers. | - |
| `renderEmptyState` | `(column: KanbanBoardColumn) => React.ReactNode` | Custom render method for empty column state. | - |
| `views` | `KanbanBoardViews` | Style overrides for various parts of the component. | `{}` |

## KanbanBoardColumn Interface

| Property | Type | Description |
| --- | --- | --- |
| `id` | `string` | Unique identifier for the column. |
| `title` | `string` | Column title shown in the header. |
| `cards` | `KanbanBoardCard[]` | Array of cards within the column. |
| `footer` | `React.ReactNode` | Optional footer content for the column. |
| `metadata` | `Record<string, unknown>` | Additional metadata for the column. |

## KanbanBoardCard Interface

| Property | Type | Description |
| --- | --- | --- |
| `id` | `string` | Unique identifier for the card. |
| `title` | `string` | Card title. |
| `description` | `string` | Optional card description. |
| `metadata` | `Record<string, unknown>` | Additional metadata for the card. |

## KanbanBoardViews Interface

Customize the appearance of different Kanban board elements.

| Property | Type | Description |
| --- | --- | --- |
| `board` | `ViewProps` | Main board container. |
| `column` | `ViewProps` | Individual column container. |
| `columnHeader` | `ViewProps` | Column header container. |
| `columnTitle` | `TextProps` | Column title text. |
| `columnBody` | `ViewProps` | Column body container (wraps cards). |
| `columnFooter` | `ViewProps` | Column footer container. |
| `card` | `ViewProps` | Individual card container. |
| `cardContent` | `ViewProps` | Content wrapper inside the card. |
| `emptyState` | `ViewProps` | Empty state container in a column. |
